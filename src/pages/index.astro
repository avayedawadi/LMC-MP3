---
import Layout from '../layouts/Layout.astro';
import { getContentBySlug, fixInternalLinks } from '../lib/content';
import { marked } from 'marked';

const contentData = getContentBySlug('/');

if (!contentData) {
  return Astro.redirect('/404');
}

const base = import.meta.env.BASE_URL;
const rawHtml = await marked(contentData.content);
const htmlContent = fixInternalLinks(rawHtml, base);
---

<Layout title={contentData.title} description={contentData.description}>
  <Fragment set:html={htmlContent} />
</Layout>
